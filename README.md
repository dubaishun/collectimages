# 网页图片采集器使用说明

## 功能介绍
这是一个基于Python GUI的网页图片采集工具，可以从指定网址采集所有图片，并按顺序下载到本地。

## 主要功能
1. **智能图片识别**: 自动识别网页中的有效图片，过滤广告和图标
2. **图片预览**: 点击列表中的图片可以预览
3. **按顺序下载**: 严格按照网页中图片出现的顺序进行下载
4. **进度显示**: 实时显示采集和下载进度
5. **操作日志**: 详细记录所有操作过程
6. **友好界面**: 直观的GUI界面，操作简单

## 安装步骤

### 1. 环境要求
- Windows 10/11
- Python 3.7 或更高版本

### 2. 安装依赖
双击运行 `install.bat` 文件，程序会自动安装所需的依赖包：
- requests: 用于网络请求
- beautifulsoup4: 用于解析HTML
- Pillow: 用于图片处理
- lxml: 用于XML/HTML解析

### 3. 运行程序
双击运行 `run.bat` 文件，或者在命令行中输入：
```
python image_scraper.py
```

## 使用方法

### 1. 启动程序
运行程序后会看到图形界面，默认已填入示例网址。

### 2. 输入网址
在"网址输入"框中输入要采集图片的网页地址。

### 3. 采集图片
点击"采集图片"按钮，程序会：
- 访问指定网址
- 解析网页内容
- 提取所有有效图片
- 在左侧列表显示图片信息

### 4. 预览图片
点击左侧列表中的任意图片，右侧会显示该图片的预览。

### 5. 选择下载文件夹
点击"选择下载文件夹"按钮，选择图片保存位置。

### 6. 开始下载
点击"按顺序下载所有图片"按钮，程序会：
- 按照网页中图片出现的顺序逐一下载
- 显示下载进度
- 更新每张图片的下载状态
- 在操作日志中记录详细信息

  <img width="2004" height="1564" alt="图片" src="https://github.com/user-attachments/assets/2afd88b7-fabb-4783-900f-8b9fe937650e" />


## 界面说明

### 顶部区域
- **网址输入框**: 输入要采集的网页地址
- **采集图片按钮**: 开始采集网页中的图片

### 中部控制区
- **选择下载文件夹**: 选择图片保存位置
- **按顺序下载所有图片**: 开始下载所有采集到的图片
- **文件夹显示**: 显示当前选择的下载路径

### 左侧列表区
显示采集到的图片信息：
- **序号**: 图片在网页中的出现顺序
- **文件名**: 生成的本地文件名
- **图片URL**: 图片的网络地址
- **下载状态**: 待下载/下载中/完成/失败

### 右侧预览区
- **图片预览**: 显示选中图片的预览
- **操作日志**: 显示详细的操作记录

### 底部进度条
显示当前操作的进度（采集或下载）

## 文件命名规则
下载的图片文件按以下规则命名：
```
001_原始文件名.jpg
002_原始文件名.png
003_原始文件名.gif
...
```
前面的数字表示图片在网页中的顺序，确保文件按正确顺序排列。

## 特色功能

### 智能图片过滤（暂未添加）
程序会自动过滤掉：
- 网站Logo
- 广告图片
- 按钮图标
- 头像图片
- 装饰性图标 

只保留真正的内容图片。

### 网络优化
- 自动设置User-Agent防止被网站拒绝
- 合理的请求间隔避免过于频繁
- 支持各种图片格式
- 自动处理相对URL和绝对URL

### 错误处理
- 网络连接超时处理
- 图片下载失败重试
- 详细的错误日志
- 友好的错误提示

## 常见问题

### Q: 为什么有些图片采集不到？
A: 可能的原因：
1. 图片使用了延迟加载技术
2. 图片需要JavaScript动态加载
3. 网站有反爬虫保护
4. 图片被程序的过滤规则误判

### Q: 下载速度很慢怎么办？
A: 程序设置了合理的下载间隔以避免对服务器造成压力，这是正常现象。

### Q: 可以修改过滤规则吗？
A: 可以编辑源代码中的 `_is_valid_image_url` 函数来调整过滤规则。

### Q: 支持哪些图片格式？
A: 支持常见的图片格式：JPG、JPEG、PNG、GIF、BMP、WebP等。

## 技术说明

### 依赖库
- **tkinter**: Python内置GUI库，无需安装
- **requests**: HTTP请求库
- **beautifulsoup4**: HTML解析库
- **Pillow**: 图片处理库
- **lxml**: XML/HTML解析器

### 网络请求
程序使用标准的HTTP请求获取网页和图片内容，遵循网站的robots.txt规则。

### 多线程
采集和下载任务在后台线程中执行，不会阻塞GUI界面。

## 版权说明
本程序仅供学习和个人使用，请遵守相关网站的使用条款和版权规定。不得用于商业用途或违法活动。

## 联系方式
如有问题或建议，请通过速光网络软件开发 suguang.cc 15120086569（vx同步）
